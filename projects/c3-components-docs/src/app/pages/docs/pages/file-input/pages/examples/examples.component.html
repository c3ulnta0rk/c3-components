<h1>File Input</h1>
<p class="description">
  A file input component that handles file uploads with progress tracking and XHR-based uploads.
  Includes a download service for fetching files as blobs.
</p>

<example-viewer>
  <h4 title>Basic File Upload</h4>

  <ng-container example>
    <p class="note">
      This example requires a backend server to handle uploads.
      Configure the <code>baseUrl</code> and <code>dest</code> inputs accordingly.
    </p>
  </ng-container>

  <c3-example-viewer-tab label="HTML">
    <div>
      <textarea highlight-js [options]="{}" lang="html">
<c3-input-file
  [accept]="'image/*'"
  [multiple]="true"
  [baseUrl]="'http://localhost:3000'"
  [dest]="'api/upload'"
  (fileAdded)="onFileAdded($event)">
</c3-input-file>

<button mat-raised-button (click)="fileInput.click()">
  Select Files
</button>
      </textarea>
    </div>
  </c3-example-viewer-tab>

  <c3-example-viewer-tab label="TypeScript">
    <div>
      <textarea highlight-js [options]="{}" lang="typescript">
import { Component, ViewChild } from '@angular/core';
import { C3InputFileModule, C3InputFile } from 'c3-components';

@Component({
  selector: 'app-upload-example',
  standalone: true,
  imports: [C3InputFileModule],
  templateUrl: './upload-example.component.html',
})
export class UploadExampleComponent {
  @ViewChild(C3InputFileComponent) fileInput!: C3InputFileComponent;

  files: C3InputFile[] = [];

  onFileAdded(file: C3InputFile): void {
    this.files.push(file);

    // Subscribe to progress changes
    file.progressionChange.subscribe({
      next: (progress) => console.log(`Progress: ${progress}%`),
      complete: () => console.log('Upload complete!', file.response)
    });
  }

  cancelUpload(file: C3InputFile): void {
    file.emit('abord'); // Cancels the upload
  }
}
      </textarea>
    </div>
  </c3-example-viewer-tab>
</example-viewer>

<example-viewer>
  <h4 title>Download Service</h4>

  <ng-container example>
    <p class="note">
      The download service provides a simple way to fetch files as Blobs.
    </p>
  </ng-container>

  <c3-example-viewer-tab label="TypeScript">
    <div>
      <textarea highlight-js [options]="{}" lang="typescript">
import { Component, inject } from '@angular/core';
import { C3DownloadService } from 'c3-components';

@Component({
  selector: 'app-download-example',
  template: `<button (click)="download()">Download File</button>`,
})
export class DownloadExampleComponent {
  private downloadService = inject(C3DownloadService);

  download(): void {
    this.downloadService.download('https://example.com/file.pdf')
      .subscribe(blob => {
        // Create download link
        const url = window.URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = 'file.pdf';
        a.click();
        window.URL.revokeObjectURL(url);
      });
  }
}
      </textarea>
    </div>
  </c3-example-viewer-tab>
</example-viewer>

