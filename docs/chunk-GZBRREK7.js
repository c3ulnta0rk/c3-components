import{b as Ie,c as ye,h as Fe}from"./chunk-5JHZO5JX.js";import{a as ve,d as Ve}from"./chunk-PEQUY4GQ.js";import{a as be,b as xe}from"./chunk-D2JVOI32.js";import{d as _e,e as ge,f as we,h as he}from"./chunk-QFITDM3P.js";import{j as me,l as A,n as Ce}from"./chunk-5WXWLFM7.js";import{$a as q,Aa as ee,Cc as F,D as G,Da as te,Dc as S,H as K,Lc as E,Mb as u,Nb as d,Nc as k,Oc as h,Qb as ae,Rb as re,Sb as b,T as J,Tb as c,Ub as f,Vb as g,X as R,Ya as j,Za as ie,Zb as ce,_b as se,a as V,ab as a,ac as w,b as L,ba as Q,ec as m,gc as r,hc as ue,ic as de,lb as I,n as D,na as C,oa as _,q as P,rb as x,rc as N,sb as ne,tb as oe,tc as fe,u as X,ub as le,uc as s,vc as v,w as Z,wc as y,xc as pe}from"./chunk-RCGMRQ6T.js";var Se=(()=>{let t=class t{constructor(o){this.el=o,this.fullscreenState=h(null,{alias:"c3Screenfull"}),this.fullscreenStateSetter=h(null,{alias:"c3-full-screen"}),this._fullscreenState=new D(!1),E(()=>{let n=this.fullscreenState();n!==null&&this._fullscreenState.next(n.valueOf()||!1)}),E(()=>{let n=this.fullscreenStateSetter();n!==null&&this._fullscreenState.next(n.valueOf()||!1)}),this._fullscreenState.pipe(G(n=>n!==null),J(2),K(100)).subscribe(()=>{this.defineState()})}defineState(){if(this._fullscreenState.getValue()){let o=this.el.nativeElement,n=o.requestFullscreen||o.webkitRequestFullScreen||o.mozRequestFullScreen||o.msRequestFullScreen;n?n.call(o):console.log("FullScreen Request Method Not Supported on this browser.")}else{let o=document,n=o.cancelFullscreen||o.webkitExitFullscreen||o.webkitCancelFullScreen||o.mozCancelFullScreen||o.msExitFullScreen;n?n.call(o):console.log("FullScreen Cancel Request Method Not Supported on this browser.")}}};t.\u0275fac=function(n){return new(n||t)(I(te))},t.\u0275dir=oe({type:t,selectors:[["","C3FullScreen",""],["","c3-full-screen",""]],inputs:{fullscreenState:[1,"c3Screenfull","fullscreenState"],fullscreenStateSetter:[1,"c3-full-screen","fullscreenStateSetter"]},standalone:!1});let i=t;return i})();var Le=(i,t)=>t.icon.text;function Pe(i,t){if(i&1&&g(0,"span"),i&2){let e=r(2);s(e.config.btnIcons==null||e.config.btnIcons.prev==null?null:e.config.btnIcons.prev.classes)}}function Re(i,t){if(i&1){let e=w();c(0,"a",5),m("click",function(n){C(e);let l=r(2);return _(l.fileViewer().previousImage(n))}),c(1,"span"),v(2),f()()}if(i&2){let e=r(2);s(e.config.btnClass),a(),s(e.config.btnSubClass),a(),y(e.config.btnIcons==null||e.config.btnIcons.prev==null?null:e.config.btnIcons.prev.text)}}function qe(i,t){if(i&1){let e=w();c(0,"button",4),m("click",function(n){C(e);let l=r();return _(l.fileViewer().previousImage(n))}),u(1,Pe,1,2,"span",2),f(),u(2,Re,3,5,"a",2)}if(i&2){let e=r();s(e.config.btnClass),b("disabled",e.fileViewer().currentIndex===0),a(),d(!(e.config.btnIcons==null||e.config.btnIcons.prev==null)&&e.config.btnIcons.prev.classes?1:-1),a(),d(!(e.config.btnIcons==null||e.config.btnIcons.prev==null)&&e.config.btnIcons.prev.text?2:-1)}}function We(i,t){if(i&1){let e=w();c(0,"button",4),m("click",function(n){C(e);let l=r();return _(l.fileViewer().nextImage(n))}),g(1,"span"),f()}if(i&2){let e=r();s(e.config.btnClass),b("disabled",e.fileViewer().currentIndex===e.fileViewer().files.length-1),a(),s(e.config.btnIcons==null||e.config.btnIcons.next==null?null:e.config.btnIcons.next.classes)}}function Ye(i,t){if(i&1){let e=w();c(0,"a",5),m("click",function(n){C(e);let l=r();return _(l.fileViewer().nextImage(n))}),c(1,"span"),v(2),f()()}if(i&2){let e=r();s(e.config.btnClass),a(),s(e.config.btnSubClass),a(),y(e.config.btnIcons==null||e.config.btnIcons.next==null?null:e.config.btnIcons.next.text)}}function Xe(i,t){if(i&1){let e=w();c(0,"button",8),m("click",function(){C(e);let n=r(3);return _(n.fileViewer().rotateCounterClockwise())}),g(1,"span"),f()}if(i&2){let e=r(3);s(e.config.btnClass),a(),s(e.config.btnIcons==null||e.config.btnIcons.rotateCounterClockwise==null?null:e.config.btnIcons.rotateCounterClockwise.classes)}}function Ze(i,t){if(i&1){let e=w();c(0,"a",5),m("click",function(){C(e);let n=r(3);return _(n.fileViewer().rotateCounterClockwise())}),c(1,"span"),v(2),f()()}if(i&2){let e=r(3);s(e.config.btnClass),a(),s(e.config.btnSubClass),a(),y(e.config.btnIcons==null||e.config.btnIcons.rotateCounterClockwise==null?null:e.config.btnIcons.rotateCounterClockwise.text)}}function Ge(i,t){if(i&1&&(u(0,Xe,2,4,"button",7),u(1,Ze,3,5,"a",2)),i&2){let e=r(2);d(!(e.config.btnIcons==null||e.config.btnIcons.rotateCounterClockwise==null)&&e.config.btnIcons.rotateCounterClockwise.classes?0:-1),a(),d(!(e.config.btnIcons==null||e.config.btnIcons.rotateCounterClockwise==null)&&e.config.btnIcons.rotateCounterClockwise.text?1:-1)}}function Ke(i,t){if(i&1){let e=w();c(0,"button",8),m("click",function(){C(e);let n=r(3);return _(n.fileViewer().rotateClockwise())}),g(1,"span"),f()}if(i&2){let e=r(3);s(e.config.btnClass),a(),s(e.config.btnIcons==null||e.config.btnIcons.rotateClockwise==null?null:e.config.btnIcons.rotateClockwise.classes)}}function Je(i,t){if(i&1){let e=w();c(0,"a",5),m("click",function(){C(e);let n=r(3);return _(n.fileViewer().rotateClockwise())}),c(1,"span"),v(2),f()()}if(i&2){let e=r(3);s(e.config.btnClass),a(),s(e.config.btnSubClass),a(),y(e.config.btnIcons==null||e.config.btnIcons.rotateClockwise==null?null:e.config.btnIcons.rotateClockwise.text)}}function Qe(i,t){if(i&1&&(u(0,Ke,2,4,"button",7),u(1,Je,3,5,"a",2)),i&2){let e=r(2);d(!(e.config.btnIcons==null||e.config.btnIcons.rotateClockwise==null)&&e.config.btnIcons.rotateClockwise.classes?0:-1),a(),d(!(e.config.btnIcons==null||e.config.btnIcons.rotateClockwise==null)&&e.config.btnIcons.rotateClockwise.text?1:-1)}}function et(i,t){if(i&1){let e=w();c(0,"button",8),m("click",function(){C(e);let n=r(3);return _(n.fileViewer().zoomOut())}),g(1,"span"),f(),c(2,"a",5),m("click",function(){C(e);let n=r(3);return _(n.fileViewer().zoomOut())}),c(3,"span"),v(4),f()()}if(i&2){let e=r(3);s(e.config.btnClass),a(),s(e.config.btnIcons==null||e.config.btnIcons.zoomOut==null?null:e.config.btnIcons.zoomOut.classes),a(),s(e.config.btnClass),a(),s(e.config.btnSubClass),a(),y(e.config.btnIcons==null||e.config.btnIcons.zoomOut==null?null:e.config.btnIcons.zoomOut.text)}}function tt(i,t){if(i&1&&u(0,et,5,9),i&2){let e=r(2);d(!(e.config.btnIcons==null||e.config.btnIcons.zoomOut==null)&&e.config.btnIcons.zoomOut.classes?0:-1)}}function it(i,t){if(i&1){let e=w();c(0,"button",8),m("click",function(){C(e);let n=r(3);return _(n.fileViewer().zoomIn())}),g(1,"span"),f()}if(i&2){let e=r(3);s(e.config.btnClass),a(),s(e.config.btnIcons==null||e.config.btnIcons.zoomIn==null?null:e.config.btnIcons.zoomIn.classes)}}function nt(i,t){if(i&1){let e=w();c(0,"a",5),m("click",function(){C(e);let n=r(3);return _(n.fileViewer().zoomIn())}),c(1,"span"),v(2),f()()}if(i&2){let e=r(3);s(e.config.btnClass),a(),s(e.config.btnSubClass),a(),y(e.config.btnIcons==null||e.config.btnIcons.zoomIn==null?null:e.config.btnIcons.zoomIn.text)}}function ot(i,t){if(i&1&&(u(0,it,2,4,"button",7),u(1,nt,3,5,"a",2)),i&2){let e=r(2);d(!(e.config.btnIcons==null||e.config.btnIcons.zoomIn==null)&&e.config.btnIcons.zoomIn.classes?0:-1),a(),d(!(e.config.btnIcons==null||e.config.btnIcons.zoomIn==null)&&e.config.btnIcons.zoomIn.text?1:-1)}}function lt(i,t){if(i&1){let e=w();c(0,"button",8),m("click",function(){C(e);let n=r(3);return _(n.fileViewer().toggleFullscreen())}),g(1,"span"),f()}if(i&2){let e=r(3);s(e.config.btnClass),a(),s(e.config.btnIcons==null||e.config.btnIcons.fullscreen==null?null:e.config.btnIcons.fullscreen.classes)}}function at(i,t){if(i&1){let e=w();c(0,"a",5),m("click",function(){C(e);let n=r(3);return _(n.fileViewer().toggleFullscreen())}),c(1,"span"),v(2),f()()}if(i&2){let e=r(3);s(e.config.btnClass),a(),s(e.config.btnSubClass),a(),y(e.config.btnIcons==null||e.config.btnIcons.fullscreen==null?null:e.config.btnIcons.fullscreen.text)}}function rt(i,t){if(i&1&&(u(0,lt,2,4,"button",7),u(1,at,3,5,"a",2)),i&2){let e=r(2);d(!(e.config.btnIcons==null||e.config.btnIcons.fullscreen==null)&&e.config.btnIcons.fullscreen.classes?0:-1),a(),d(!(e.config.btnIcons==null||e.config.btnIcons.fullscreen==null)&&e.config.btnIcons.fullscreen.text?1:-1)}}function ct(i,t){if(i&1){let e=w();c(0,"button",8),m("click",function(){C(e);let n=r(3);return _(n.fileViewer().reset())}),g(1,"span"),f()}if(i&2){let e=r(3);s(e.config.btnClass),a(),s(e.config.btnIcons==null||e.config.btnIcons.reset==null?null:e.config.btnIcons.reset.classes)}}function st(i,t){if(i&1){let e=w();c(0,"a",5),m("click",function(){C(e);let n=r(3);return _(n.fileViewer().reset())}),c(1,"span"),v(2),f()()}if(i&2){let e=r(3);s(e.config.btnClass),a(),s(e.config.btnSubClass),a(),y(e.config.btnIcons==null||e.config.btnIcons.reset==null?null:e.config.btnIcons.reset.text)}}function ut(i,t){if(i&1&&(u(0,ct,2,4,"button",7),u(1,st,3,5,"a",2)),i&2){let e=r(2);d(!(e.config.btnIcons==null||e.config.btnIcons.reset==null)&&e.config.btnIcons.reset.classes?0:-1),a(),d(!(e.config.btnIcons==null||e.config.btnIcons.reset==null)&&e.config.btnIcons.reset.text?1:-1)}}function dt(i,t){if(i&1){let e=w();c(0,"button",8),m("click",function(){C(e);let n=r(3);return _(n.fileViewer().download())}),g(1,"span"),f()}if(i&2){let e=r(3);s(e.config.btnClass),a(),s(e.config.btnIcons==null||e.config.btnIcons.download==null?null:e.config.btnIcons.download.classes)}}function ft(i,t){if(i&1){let e=w();c(0,"a",5),m("click",function(){C(e);let n=r(3);return _(n.fileViewer().download())}),c(1,"span"),v(2),f()()}if(i&2){let e=r(3);s(e.config.btnClass),a(),s(e.config.btnSubClass),a(),y(e.config.btnIcons==null||e.config.btnIcons.download==null?null:e.config.btnIcons.download.text)}}function pt(i,t){if(i&1&&(u(0,dt,2,4,"button",7),u(1,ft,3,5,"a",2)),i&2){let e=r(2);d(!(e.config.btnIcons==null||e.config.btnIcons.download==null)&&e.config.btnIcons.download.classes?0:-1),a(),d(!(e.config.btnIcons==null||e.config.btnIcons.download==null)&&e.config.btnIcons.download.text?1:-1)}}function mt(i,t){if(i&1&&(c(0,"button",9),g(1,"span"),f()),i&2){let e=r().$implicit,o=r(2);s(o.config.btnClass),a(),s(e.icon.classes)}}function Ct(i,t){if(i&1&&(c(0,"a")(1,"span"),v(2),f()()),i&2){let e=r().$implicit,o=r(2);s(o.config.btnClass),a(),s(o.config.btnSubClass),a(),y(e.icon.text)}}function _t(i,t){if(i&1&&(u(0,mt,2,4,"button",7),u(1,Ct,3,5,"a",2)),i&2){let e=t.$implicit;d(e.icon.classes?0:-1),a(),d(e.icon.text?1:-1)}}function gt(i,t){if(i&1&&(c(0,"div",6),u(1,Ge,2,2),u(2,Qe,2,2),u(3,tt,1,1),u(4,ot,2,2),u(5,rt,2,2),u(6,ut,2,2),u(7,pt,2,2),ae(8,_t,2,2,null,null,Le),f()),i&2){let e=r();s(e.config.btnContainerClass),a(),d(e.config.btnShow!=null&&e.config.btnShow.rotateCounterClockwise?1:-1),a(),d(e.config.btnShow!=null&&e.config.btnShow.rotateClockwise?2:-1),a(),d(e.config.btnShow!=null&&e.config.btnShow.zoomOut?3:-1),a(),d(e.config.btnShow!=null&&e.config.btnShow.zoomIn?4:-1),a(),d(e.config.allowFullscreen?5:-1),a(),d(e.config.btnShow!=null&&e.config.btnShow.reset?6:-1),a(),d(e.config.btnShow!=null&&e.config.btnShow.download?7:-1),a(),re(e.config.customBtns)}}var Me=(()=>{let t=class t{constructor(){this.fileViewer=h.required()}get config(){return this.fileViewer().config}};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=x({type:t,selectors:[["c3-file-viewer-actions"]],inputs:{fileViewer:[1,"fileViewer"]},standalone:!1,decls:5,vars:4,consts:[[1,"nav-button-container"],["type","button",3,"class","disabled"],[3,"class"],[1,"btn-container",3,"class"],["type","button",3,"click","disabled"],[3,"click"],[1,"btn-container"],["type","button",3,"class"],["type","button",3,"click"],["type","button"]],template:function(n,l){n&1&&(c(0,"div",0),u(1,qe,3,5),u(2,We,2,5,"button",1),u(3,Ye,3,5,"a",2),f(),u(4,gt,10,9,"div",3)),n&2&&(a(),d(l.config.btnShow!=null&&l.config.btnShow.prev?1:-1),a(),d(l.config.btnShow!=null&&l.config.btnShow.next?2:-1),a(),d(!(l.config.btnIcons==null||l.config.btnIcons.next==null)&&l.config.btnIcons.next.text?3:-1),a(),d(l.fileViewer().currentFile.type.startsWith("image")?4:-1))},encapsulation:2});let i=t;return i})();var O=(()=>{let t=class t{constructor(o){this.sanitizer=o}transform(o){return o?this.sanitizer.bypassSecurityTrustResourceUrl(o):""}};t.\u0275fac=function(n){return new(n||t)(I(he,16))},t.\u0275pipe=le({name:"c3SafeUrl",type:t,pure:!0});let i=t;return i})();function ht(i,t){if(i&1){let e=w();c(0,"img",1),F(1,"async"),F(2,"c3SafeUrl"),m("dragstart",function(n){C(e);let l=r();return _(l.dragstart.emit(n))}),f()}if(i&2){let e=r();b("src",S(2,4,S(1,2,e.fileViewer().currentFile.objectUrl)),j)("ngStyle",e.fileViewer().style)}}var Te=(()=>{let t=class t{constructor(){this.fileViewer=h.required(),this.dragstart=k()}};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=x({type:t,selectors:[["c3-file-viewer-image"],["","c3-file-viewer-image",""]],inputs:{fileViewer:[1,"fileViewer"]},outputs:{dragstart:"dragstart"},standalone:!1,decls:1,vars:1,consts:[["alt","Image not found...",3,"src","ngStyle"],["alt","Image not found...",3,"dragstart","src","ngStyle"]],template:function(n,l){n&1&&u(0,ht,3,6,"img",0),n&2&&d(l.fileViewer().currentFile.objectUrl?0:-1)},dependencies:[me,A,O],encapsulation:2});let i=t;return i})();var ke=(()=>{let t=class t{constructor(){this.fileViewer=h.required(),this.dragstart=k()}};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=x({type:t,selectors:[["c3-file-viewer-pdf"]],hostAttrs:[1,"c3-file-viewer-pdf",2,"display","block"],inputs:{fileViewer:[1,"fileViewer"]},outputs:{dragstart:"dragstart"},standalone:!1,decls:6,vars:9,consts:[["type","application/pdf",3,"src"],["mat-icon-button","",1,"download-button",3,"click"]],template:function(n,l){n&1&&(g(0,"embed",0),F(1,"async"),F(2,"c3SafeUrl"),c(3,"button",1),m("click",function(){return l.fileViewer().download()}),c(4,"mat-icon"),v(5,"download"),f()()),n&2&&(N("height","100%")("width","100%"),b("src",S(2,7,S(1,5,l.fileViewer().currentFile.objectUrl)),ie))},dependencies:[be,ve,A,O],encapsulation:2});let i=t;return i})();var Ae=(()=>{let t=class t{constructor(){this.fileViewer=h.required()}};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=x({type:t,selectors:[["c3-file-viewer-video"]],inputs:{fileViewer:[1,"fileViewer"]},standalone:!1,decls:3,vars:5,consts:[["controls","","crossorigin","*",3,"src"]],template:function(n,l){n&1&&(g(0,"video",0),F(1,"async"),F(2,"c3SafeUrl")),n&2&&b("src",S(2,3,S(1,1,l.fileViewer().currentFile.objectUrl)),j)},dependencies:[A,O],encapsulation:2});let i=t;return i})();var De=(()=>{let t=class t{constructor(){this.fileViewer=h.required()}};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=x({type:t,selectors:[["c3-file-viewer-default"]],inputs:{fileViewer:[1,"fileViewer"]},standalone:!1,decls:3,vars:1,consts:[[3,"click"]],template:function(n,l){n&1&&(ce(0),c(1,"button",0),m("click",function(){return l.fileViewer().download()}),v(2),f(),se()),n&2&&(a(2),pe("Download ",l.fileViewer().getOriginalName()))},styles:["[_nghost-%COMP%]{display:block}"]});let i=t;return i})();function It(i,t){if(i&1){let e=w();c(0,"c3-file-viewer-image",5),m("dragstart",function(n){C(e);let l=r();return _(l.onDragStart(n))}),f()}if(i&2){let e=r();fe(e.style),b("fileViewer",e)}}function yt(i,t){if(i&1&&g(0,"c3-file-viewer-video",3),i&2){let e=r();b("fileViewer",e)}}function Ft(i,t){if(i&1&&g(0,"c3-file-viewer-pdf",3),i&2){let e=r();b("fileViewer",e)}}function St(i,t){if(i&1&&g(0,"c3-file-viewer-default",3),i&2){let e=r();b("fileViewer",e)}}function Mt(i,t){i&1&&(c(0,"div",4),g(1,"div",6),f())}function Tt(i,t){if(i&1){let e=w();c(0,"div",1),F(1,"async"),m("wheel",function(n){let l=C(e);return _(l.scrollZoom(n))})("dragover",function(n){let l=C(e);return _(l.onDragOver(n))}),u(2,It,1,3,"c3-file-viewer-image",2)(3,yt,1,1,"c3-file-viewer-video",3)(4,Ft,1,1,"c3-file-viewer-pdf",3)(5,St,1,1,"c3-file-viewer-default",3),g(6,"div"),u(7,Mt,2,0,"div",4),g(8,"c3-file-viewer-actions",3),f()}if(i&2){let e=t;N("height",e.styleHeight)("background-color",e.config.containerBackgroundColor),b("c3-full-screen",S(1,8,e.fullscreen$)),a(2),d(e.currentFile.type.startsWith("image")?2:e.currentFile.type.startsWith("video")?3:e.currentFile.type.startsWith("application/pdf")?4:5),a(5),d(e.loading?7:-1),a(),b("fileViewer",e)}}var ze=(()=>{let t=class t{constructor(o,n){this.moduleConfig=o,this._http=n,this.screenHeightOccupied=h(0),this.fileViewer=h.required(),this.indexChange=k(),this.configChange=k(),this.customFileEvent=k(),E(()=>{let l=this.fileViewer();l.customFile$.subscribe(p=>{this.customFileEvent.emit(p)}),l.index$.subscribe(p=>{this.indexChange.emit(p)}),l.config$.subscribe(p=>{this.configChange.emit(p)})})}ngOnInit(){this.defineStyleHeight()}onMouseOver(){let o=this.fileViewer();o&&(o.hovered=!0)}onMouseLeave(){let o=this.fileViewer();o&&(o.hovered=!1)}ngOnChanges(o){o.screenHeightOccupied&&this.fileViewer()&&this.defineStyleHeight()}next(o){this.fileViewer().nextImage(o)}previous(o){this.fileViewer().previousImage(o)}defineStyleHeight(){this.fileViewer().styleHeight="calc(100% - "+this.screenHeightOccupied()+"px)"}};t.\u0275fac=function(n){return new(n||t)(I("config",8),I(_e))},t.\u0275cmp=x({type:t,selectors:[["c3-file-viewer"]],hostAttrs:[1,"c3-file-viewer"],hostBindings:function(n,l){n&1&&m("mouseover",function(){return l.onMouseOver()})("mouseleave",function(){return l.onMouseLeave()})("keyup.ArrowRight",function(M){return l.next(M)},q)("keyup.ArrowLeft",function(M){return l.previous(M)},q)},inputs:{screenHeightOccupied:[1,"screenHeightOccupied"],fileViewer:[1,"fileViewer"]},outputs:{indexChange:"indexChange",configChange:"configChange",customFileEvent:"customFileEvent"},standalone:!1,features:[ee],decls:1,vars:1,consts:[[1,"c3-file-container",3,"c3-full-screen","height","backgroundColor"],[1,"c3-file-container",3,"wheel","dragover","c3-full-screen"],[3,"fileViewer","style"],[3,"fileViewer"],[1,"spinner-container"],[3,"dragstart","fileViewer"],[1,"spinner"]],template:function(n,l){if(n&1&&u(0,Tt,9,10,"div",0),n&2){let p;d((p=l.fileViewer())?0:-1,p)}},dependencies:[Se,Me,Te,ke,Ae,De,A],styles:[`.c3-file-container{position:relative;width:100%;display:flex;justify-content:center;align-items:center;overflow:hidden}
`],encapsulation:2});let i=t;return i})();var Oe=(()=>{let t=class t{constructor(o){this.fileViewer=o}};t.\u0275fac=function(n){return new(n||t)(I(Ie))},t.\u0275cmp=x({type:t,selectors:[["ng-component"]],standalone:!1,decls:1,vars:2,consts:[[3,"fileViewer","screenHeightOccupied"]],template:function(n,l){n&1&&g(0,"c3-file-viewer",0),n&2&&b("fileViewer",l.fileViewer)("screenHeightOccupied",0)},dependencies:[ze],encapsulation:2});let i=t;return i})();var At=["*"],di=(()=>{let t=class t{constructor(o){this._dialog=o,this.fileViewer=h.required(),this.dialogConfig=h({panelClass:"c3-file-viewer-dialog",width:"80%",height:"80%"})}openDialog(){this._dialog.open(Oe,V({data:this.fileViewer()},this.dialogConfig()))}};t.\u0275fac=function(n){return new(n||t)(I(ye))},t.\u0275cmp=x({type:t,selectors:[["c3-file-viewer-dialog"]],hostAttrs:[1,"c3-file-viewer-dialog"],hostBindings:function(n,l){n&1&&m("click",function(){return l.openDialog()})},inputs:{fileViewer:[1,"fileViewer"],dialogConfig:[1,"dialogConfig"]},standalone:!1,ngContentSelectors:At,decls:1,vars:0,template:function(n,l){n&1&&(ue(),de(0))},encapsulation:2});let i=t;return i})();var H={btnContainerClass:"btn-container",btnClass:"default",btnSubClass:"material-icons",zoomFactor:.1,containerBackgroundColor:"#00000000",wheelZoom:!1,allowFullscreen:!0,allowKeyboardNavigation:!0,btnShow:{zoomIn:!0,zoomOut:!0,rotateClockwise:!0,rotateCounterClockwise:!0,next:!0,prev:!0,reset:!0,download:!0},btnIcons:{zoomIn:{text:"zoom_in"},zoomOut:{text:"zoom_out"},rotateClockwise:{text:"rotate_right"},rotateCounterClockwise:{text:"rotate_left"},fullscreen:{text:"fullscreen"},reset:{text:"restore"},download:{text:"download"}}};var $=class{constructor(t,e){this.name=t,this.fileUrl=e}};var Dt=["application/pdf","image/jpeg","image/png","image/gif","image/svg+xml","image/webp","image/avif","image/bmp","image/x-icon","video/mp4","video/webm","video/ogg"];function Ee(i){return Dt.includes(i)}var Ue=class{get config(){return this._config}set config(t){this._config=this.mergeConfig(H,t),this.config$.next(this._config)}get currentFile(){return this.filesObjectUrl[this.currentIndex]}set files(t){this._files=t,this.currentIndex=0,this.index$.next(this.currentIndex);for(let e of t)if(this.filesObjectUrl.push(L(V({},e),{objectUrl:e.objectUrl||this.createObjectURL(e)})),e.alternativeVersions)for(let o of e.alternativeVersions)this.filesObjectUrl.push(L(V(V({},e),o),{objectUrl:this.createObjectURL(o)}))}get files(){return this._files}constructor({config:t,files:e,client:o}){this._config=H,this.config$=new D(H),this.fullscreen$=new D(!1),this.customFile$=new D(null),this.index$=new D(0),this.loading=!0,this.currentIndex=0,this.style={transform:"",msTransform:"",oTransform:"",webkitTransform:"",minHeight:"auto",maxHeight:"auto",height:"auto",minWidth:"auto",maxWidth:"auto",width:"auto"},this.styleHeight="100%",this.hovered=!1,this._files=[],this.filesObjectUrl=[],this.locationBlobMap=new Map,this.scale=1,this.rotation=0,this.translateX=0,this.translateY=0,this.prevX=0,this.prevY=0,t&&(this.config=t),o&&(this.client=o.get.bind(o)),e&&(this.files=e),this.config$.subscribe(n=>{let{minHeight:l,maxHeight:p,minWidth:M,maxWidth:U,height:z,width:B}=n;this.style.minHeight=this.valueToCss(l),this.style.height=this.valueToCss(z),this.style.width=this.valueToCss(B),this.style.maxHeight=this.valueToCss(p),this.style.minWidth=this.valueToCss(M),this.style.maxWidth=this.valueToCss(U),this.styleHeight=this.valueToCss(z),this.updateStyle()})}createObjectURL(t){this.onLoadStart();let e=zt(t)?t.type:t.contentType;if(!Ee(e)){this.onLoaded();return}return P(t.location).pipe(Z(o=>this.locationBlobMap.has(o)?P(this.locationBlobMap.get(o)):this.getFile(o).pipe(X(n=>URL.createObjectURL(n)),R(n=>this.locationBlobMap.set(o,n)))),R(()=>this.onLoaded()))}encodeUrl(t){try{if(!t.includes("://")){let[p,M]=t.split("?"),U=p.split("/").map(z=>z?encodeURIComponent(z):"").join("/");if(M){let B=M.split("&").map(je=>{let[Ne,...He]=je.split("="),$e=He.join("=");return`${encodeURIComponent(Ne)}=${encodeURIComponent($e)}`});return`${U}?${B.join("&")}`}return U}let e=new URL(t),o=e.pathname.split("/").map(p=>p?encodeURIComponent(p):"").join("/"),n=new URLSearchParams;e.searchParams.forEach((p,M)=>{n.append(M,p)});let l=n.toString()?`?${n.toString()}`:"";return`${e.protocol}//${e.host}${o}${l}${e.hash}`}catch{return encodeURI(t)}}getFile(t){let e=this.config.customClient||this.client;if(!e)throw new Error("No http client provided. Please provide a custom client or import HttpClientModule");let o=this.encodeUrl(t);return e(o,{responseType:"blob"})}previousImage(t){this.canNavigate(t)&&(this.loading=!0,this.currentIndex>0?this.currentIndex--:this.currentIndex=this.files.length-1,this.index$.next(this.currentIndex),this.reset())}nextImage(t){this.canNavigate(t)&&(this.loading=!0,this.currentIndex<this.files.length-1?this.currentIndex++:this.currentIndex=0,this.index$.next(this.currentIndex),this.reset())}zoomIn(){this.scale*=1+(this.config.zoomFactor||0),this.updateStyle()}zoomOut(){this.scale>(this.config.zoomFactor||0)&&(this.scale/=1+(this.config.zoomFactor||0)),this.updateStyle()}scrollZoom(t){return this.config.wheelZoom?(t.deltaY>0?this.zoomOut():this.zoomIn(),!1):!0}rotateClockwise(){this.rotation+=90,this.updateStyle()}rotateCounterClockwise(){this.rotation-=90,this.updateStyle()}onLoaded(){this.loading=!1}onLoadStart(){this.loading=!0}imageNotFound(t){this.loading=!1,this.customFile$.next(new $("imageNotFound",t.location))}onDragOver(t){this.translateX+=t.clientX-this.prevX,this.translateY+=t.clientY-this.prevY,this.prevX=t.clientX,this.prevY=t.clientY,this.updateStyle()}onDragStart(t){if(t.target&&t.dataTransfer&&t.dataTransfer.setDragImage){let o=t.target.nextElementSibling;o&&t.dataTransfer.setDragImage(o,0,0)}this.prevX=t.clientX,this.prevY=t.clientY}toggleFullscreen(){let t=this.fullscreen$.getValue();this.fullscreen$.next(!t),t&&this.reset()}reset(){this.scale=1,this.rotation=0,this.translateX=0,this.translateY=0,this.updateStyle()}getOriginalName(t=this.currentFile){return t.metadata?.originalName||t.name}canNavigate(t){return t==null||this.config.allowKeyboardNavigation&&this.hovered}updateStyle(){this.style.transform=`translate(${this.translateX}px, ${this.translateY}px) rotate(${this.rotation}deg) scale(${this.scale})`,this.style.msTransform=this.style.transform,this.style.webkitTransform=this.style.transform,this.style.oTransform=this.style.transform}valueToCss(t){return t?typeof t=="string"?t:t+"px":"auto"}mergeConfig(t,e){let o=V({},t);return e&&(o=V(V({},t),e),e.btnIcons&&(o.btnIcons=V(V({},t.btnIcons),e.btnIcons))),o}download(t=this.currentFile){let e=this.config.customClient||this.client,o=this.getOriginalName(t);if(t.objectUrl&&this.locationBlobMap.has(t.location)){let n=this.locationBlobMap.get(t.location);this.downloadFromUrl(n,o)}else e?this.downloadWithClient(t,e,o):console.error("No http client available for download")}downloadFromUrl(t,e){let o=document.createElement("a");o.href=t,o.download=e,document.body.appendChild(o),o.click(),document.body.removeChild(o)}downloadWithClient(t,e,o){let n=this.encodeUrl(t.location);e(n,{responseType:"blob"}).subscribe({next:l=>{let p=URL.createObjectURL(l);this.downloadFromUrl(p,o),setTimeout(()=>{URL.revokeObjectURL(p)},1e3)},error:l=>{console.error("Download failed:",l);let p=document.createElement("a");p.href=t.location,p.download=o,p.target="_blank",p.click()}})}};function zt(i){return"type"in i}var Mi=(()=>{let t=class t{};t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=ne({type:t}),t.\u0275inj=Q({providers:[ge(we())],imports:[Ce,Fe,xe,Ve]});let i=t;return i})();var ki=[{name:"123645-Crabby - 1",metadata:{originalName:"Crabby - 1"},type:"image/png",location:"img/crabby-1.png",lastModified:new Date},{name:"123645-Crabby - 2",metadata:{originalName:"Crabby - 2"},type:"image/jpeg",location:"img/crabby+2.jpeg",lastModified:new Date},{name:"123645-Crabby - 3",metadata:{originalName:"Crabby - 3"},type:"image/png",location:"img/crabby-3.png",lastModified:new Date},{name:"123645-Crabby - 4",metadata:{originalName:"Crabby - 4"},type:"image/png",location:"img/crabby-4.png",lastModified:new Date},{name:"123645-Crabby - 5",metadata:{originalName:"Crabby - 5"},type:"image/png",location:"img/crabby-5.png"},{name:"123645-Crabby - 6",metadata:{originalName:"Crabby - 6"},type:"image/png",location:"img/crabby-6.png"},{name:"123645-PDF",metadata:{originalName:"PDF.pdf"},type:"application/pdf",location:"img/r.pdf"},{location:"zip/test.zip",type:"application/zip",name:"chelou-test.zip",metadata:{originalName:"test.zip"}},{location:"video/Crabe_ZZ_Top.mp4",type:"video/mp4",name:"Crabe_ZZ_Top.mp4",metadata:{originalName:"Crabe_ZZ_Top.mp4"}},{location:"https://upload.wikimedia.org/wikipedia/commons/7/79/Terminator_in_Madame_Tussaud_London_%2833465711484%29.jpg",type:"image/jpeg",name:"Terminator_in_Madame_Tussaud_London.jpg",metadata:{originalName:"Terminator_in_Madame_Tussaud_London.jpg"}}],Ai={btnContainerClass:"other",btnClass:"btn btn-hover-primary px-1",btnSubClass:"material-icons font-size-xl",zoomFactor:.1,wheelZoom:!0,allowFullscreen:!0,allowKeyboardNavigation:!0,height:"640px",btnShow:{zoomIn:!0,zoomOut:!0,rotateClockwise:!0,rotateCounterClockwise:!0,next:!1,prev:!1,reset:!0,download:!0},btnIcons:{next:{text:"navigate_next"},prev:{text:"navigate_before"}},customBtns:[]};export{ze as a,di as b,Ue as c,Mi as d,ki as e,Ai as f};
