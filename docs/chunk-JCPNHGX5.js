import{b as ve,c as Ve,h as Ie}from"./chunk-IHLRU4DX.js";import{a as he,b as xe}from"./chunk-O2VT6O52.js";import{a as we,d as be}from"./chunk-GE74CIZ5.js";import{d as me,e as Ce,f as _e,g as ge}from"./chunk-XO7UL54F.js";import{Ba as Q,D as X,Fc as O,H as Z,Hc as T,Ib as u,Ic as w,Jb as d,Mb as oe,Nb as le,Ob as b,Pb as s,Qb as f,Rb as _,T as G,Vb as ae,Wa as E,Wb as re,X as L,Xa as ee,Yb as g,Za as $,_a as a,_b as p,a as V,ac as r,b as H,ba as K,bc as se,cc as ce,cd as fe,ed as k,gd as pe,jb as I,la as m,lc as N,ma as C,n as A,nc as ue,oc as c,pb as x,pc as v,q as B,qb as te,qc as y,rb as ie,rc as de,sb as ne,u as W,w as Y,wc as F,xc as S,ya as J}from"./chunk-RPEIJ3SN.js";var ye=(()=>{let t=class t{constructor(o){this.el=o,this.fullscreenState=w(null,{alias:"c3Screenfull"}),this.fullscreenStateSetter=w(null,{alias:"c3-full-screen"}),this._fullscreenState=new A(!1),O(()=>{let n=this.fullscreenState();n!==null&&this._fullscreenState.next(n.valueOf()||!1)}),O(()=>{let n=this.fullscreenStateSetter();n!==null&&this._fullscreenState.next(n.valueOf()||!1)}),this._fullscreenState.pipe(X(n=>n!==null),G(2),Z(100)).subscribe(()=>{this.defineState()})}defineState(){if(this._fullscreenState.getValue()){let o=this.el.nativeElement,n=o.requestFullscreen||o.webkitRequestFullScreen||o.mozRequestFullScreen||o.msRequestFullScreen;n?n.call(o):console.log("FullScreen Request Method Not Supported on this browser.")}else{let o=document,n=o.cancelFullscreen||o.webkitExitFullscreen||o.webkitCancelFullScreen||o.mozCancelFullScreen||o.msExitFullScreen;n?n.call(o):console.log("FullScreen Cancel Request Method Not Supported on this browser.")}}};t.\u0275fac=function(n){return new(n||t)(I(Q))},t.\u0275dir=ie({type:t,selectors:[["","C3FullScreen",""],["","c3-full-screen",""]],inputs:{fullscreenState:[1,"c3Screenfull","fullscreenState"],fullscreenStateSetter:[1,"c3-full-screen","fullscreenStateSetter"]},standalone:!1});let i=t;return i})();var Ue=(i,t)=>t.icon.text;function He(i,t){if(i&1&&_(0,"span"),i&2){let e=r(2);c(e.config.btnIcons==null||e.config.btnIcons.prev==null?null:e.config.btnIcons.prev.classes)}}function Be(i,t){if(i&1){let e=g();s(0,"a",5),p("click",function(n){m(e);let l=r(2);return C(l.fileViewer().previousImage(n))}),s(1,"span"),v(2),f()()}if(i&2){let e=r(2);c(e.config.btnClass),a(),c(e.config.btnSubClass),a(),y(e.config.btnIcons==null||e.config.btnIcons.prev==null?null:e.config.btnIcons.prev.text)}}function Le(i,t){if(i&1){let e=g();s(0,"button",4),p("click",function(n){m(e);let l=r();return C(l.fileViewer().previousImage(n))}),u(1,He,1,2,"span",2),f(),u(2,Be,3,5,"a",2)}if(i&2){let e=r();c(e.config.btnClass),b("disabled",e.fileViewer().currentIndex===0),a(),d(!(e.config.btnIcons==null||e.config.btnIcons.prev==null)&&e.config.btnIcons.prev.classes?1:-1),a(),d(!(e.config.btnIcons==null||e.config.btnIcons.prev==null)&&e.config.btnIcons.prev.text?2:-1)}}function $e(i,t){if(i&1){let e=g();s(0,"button",4),p("click",function(n){m(e);let l=r();return C(l.fileViewer().nextImage(n))}),_(1,"span"),f()}if(i&2){let e=r();c(e.config.btnClass),b("disabled",e.fileViewer().currentIndex===e.fileViewer().files.length-1),a(),c(e.config.btnIcons==null||e.config.btnIcons.next==null?null:e.config.btnIcons.next.classes)}}function Pe(i,t){if(i&1){let e=g();s(0,"a",5),p("click",function(n){m(e);let l=r();return C(l.fileViewer().nextImage(n))}),s(1,"span"),v(2),f()()}if(i&2){let e=r();c(e.config.btnClass),a(),c(e.config.btnSubClass),a(),y(e.config.btnIcons==null||e.config.btnIcons.next==null?null:e.config.btnIcons.next.text)}}function Re(i,t){if(i&1){let e=g();s(0,"button",8),p("click",function(){m(e);let n=r(3);return C(n.fileViewer().rotateCounterClockwise())}),_(1,"span"),f()}if(i&2){let e=r(3);c(e.config.btnClass),a(),c(e.config.btnIcons==null||e.config.btnIcons.rotateCounterClockwise==null?null:e.config.btnIcons.rotateCounterClockwise.classes)}}function qe(i,t){if(i&1){let e=g();s(0,"a",5),p("click",function(){m(e);let n=r(3);return C(n.fileViewer().rotateCounterClockwise())}),s(1,"span"),v(2),f()()}if(i&2){let e=r(3);c(e.config.btnClass),a(),c(e.config.btnSubClass),a(),y(e.config.btnIcons==null||e.config.btnIcons.rotateCounterClockwise==null?null:e.config.btnIcons.rotateCounterClockwise.text)}}function We(i,t){if(i&1&&(u(0,Re,2,4,"button",7),u(1,qe,3,5,"a",2)),i&2){let e=r(2);d(!(e.config.btnIcons==null||e.config.btnIcons.rotateCounterClockwise==null)&&e.config.btnIcons.rotateCounterClockwise.classes?0:-1),a(),d(!(e.config.btnIcons==null||e.config.btnIcons.rotateCounterClockwise==null)&&e.config.btnIcons.rotateCounterClockwise.text?1:-1)}}function Ye(i,t){if(i&1){let e=g();s(0,"button",8),p("click",function(){m(e);let n=r(3);return C(n.fileViewer().rotateClockwise())}),_(1,"span"),f()}if(i&2){let e=r(3);c(e.config.btnClass),a(),c(e.config.btnIcons==null||e.config.btnIcons.rotateClockwise==null?null:e.config.btnIcons.rotateClockwise.classes)}}function Xe(i,t){if(i&1){let e=g();s(0,"a",5),p("click",function(){m(e);let n=r(3);return C(n.fileViewer().rotateClockwise())}),s(1,"span"),v(2),f()()}if(i&2){let e=r(3);c(e.config.btnClass),a(),c(e.config.btnSubClass),a(),y(e.config.btnIcons==null||e.config.btnIcons.rotateClockwise==null?null:e.config.btnIcons.rotateClockwise.text)}}function Ze(i,t){if(i&1&&(u(0,Ye,2,4,"button",7),u(1,Xe,3,5,"a",2)),i&2){let e=r(2);d(!(e.config.btnIcons==null||e.config.btnIcons.rotateClockwise==null)&&e.config.btnIcons.rotateClockwise.classes?0:-1),a(),d(!(e.config.btnIcons==null||e.config.btnIcons.rotateClockwise==null)&&e.config.btnIcons.rotateClockwise.text?1:-1)}}function Ge(i,t){if(i&1){let e=g();s(0,"button",8),p("click",function(){m(e);let n=r(3);return C(n.fileViewer().zoomOut())}),_(1,"span"),f(),s(2,"a",5),p("click",function(){m(e);let n=r(3);return C(n.fileViewer().zoomOut())}),s(3,"span"),v(4),f()()}if(i&2){let e=r(3);c(e.config.btnClass),a(),c(e.config.btnIcons==null||e.config.btnIcons.zoomOut==null?null:e.config.btnIcons.zoomOut.classes),a(),c(e.config.btnClass),a(),c(e.config.btnSubClass),a(),y(e.config.btnIcons==null||e.config.btnIcons.zoomOut==null?null:e.config.btnIcons.zoomOut.text)}}function Ke(i,t){if(i&1&&u(0,Ge,5,9),i&2){let e=r(2);d(!(e.config.btnIcons==null||e.config.btnIcons.zoomOut==null)&&e.config.btnIcons.zoomOut.classes?0:-1)}}function Je(i,t){if(i&1){let e=g();s(0,"button",8),p("click",function(){m(e);let n=r(3);return C(n.fileViewer().zoomIn())}),_(1,"span"),f()}if(i&2){let e=r(3);c(e.config.btnClass),a(),c(e.config.btnIcons==null||e.config.btnIcons.zoomIn==null?null:e.config.btnIcons.zoomIn.classes)}}function Qe(i,t){if(i&1){let e=g();s(0,"a",5),p("click",function(){m(e);let n=r(3);return C(n.fileViewer().zoomIn())}),s(1,"span"),v(2),f()()}if(i&2){let e=r(3);c(e.config.btnClass),a(),c(e.config.btnSubClass),a(),y(e.config.btnIcons==null||e.config.btnIcons.zoomIn==null?null:e.config.btnIcons.zoomIn.text)}}function et(i,t){if(i&1&&(u(0,Je,2,4,"button",7),u(1,Qe,3,5,"a",2)),i&2){let e=r(2);d(!(e.config.btnIcons==null||e.config.btnIcons.zoomIn==null)&&e.config.btnIcons.zoomIn.classes?0:-1),a(),d(!(e.config.btnIcons==null||e.config.btnIcons.zoomIn==null)&&e.config.btnIcons.zoomIn.text?1:-1)}}function tt(i,t){if(i&1){let e=g();s(0,"button",8),p("click",function(){m(e);let n=r(3);return C(n.fileViewer().toggleFullscreen())}),_(1,"span"),f()}if(i&2){let e=r(3);c(e.config.btnClass),a(),c(e.config.btnIcons==null||e.config.btnIcons.fullscreen==null?null:e.config.btnIcons.fullscreen.classes)}}function it(i,t){if(i&1){let e=g();s(0,"a",5),p("click",function(){m(e);let n=r(3);return C(n.fileViewer().toggleFullscreen())}),s(1,"span"),v(2),f()()}if(i&2){let e=r(3);c(e.config.btnClass),a(),c(e.config.btnSubClass),a(),y(e.config.btnIcons==null||e.config.btnIcons.fullscreen==null?null:e.config.btnIcons.fullscreen.text)}}function nt(i,t){if(i&1&&(u(0,tt,2,4,"button",7),u(1,it,3,5,"a",2)),i&2){let e=r(2);d(!(e.config.btnIcons==null||e.config.btnIcons.fullscreen==null)&&e.config.btnIcons.fullscreen.classes?0:-1),a(),d(!(e.config.btnIcons==null||e.config.btnIcons.fullscreen==null)&&e.config.btnIcons.fullscreen.text?1:-1)}}function ot(i,t){if(i&1){let e=g();s(0,"button",8),p("click",function(){m(e);let n=r(3);return C(n.fileViewer().reset())}),_(1,"span"),f()}if(i&2){let e=r(3);c(e.config.btnClass),a(),c(e.config.btnIcons==null||e.config.btnIcons.reset==null?null:e.config.btnIcons.reset.classes)}}function lt(i,t){if(i&1){let e=g();s(0,"a",5),p("click",function(){m(e);let n=r(3);return C(n.fileViewer().reset())}),s(1,"span"),v(2),f()()}if(i&2){let e=r(3);c(e.config.btnClass),a(),c(e.config.btnSubClass),a(),y(e.config.btnIcons==null||e.config.btnIcons.reset==null?null:e.config.btnIcons.reset.text)}}function at(i,t){if(i&1&&(u(0,ot,2,4,"button",7),u(1,lt,3,5,"a",2)),i&2){let e=r(2);d(!(e.config.btnIcons==null||e.config.btnIcons.reset==null)&&e.config.btnIcons.reset.classes?0:-1),a(),d(!(e.config.btnIcons==null||e.config.btnIcons.reset==null)&&e.config.btnIcons.reset.text?1:-1)}}function rt(i,t){if(i&1){let e=g();s(0,"button",8),p("click",function(){m(e);let n=r(3);return C(n.fileViewer().download())}),_(1,"span"),f()}if(i&2){let e=r(3);c(e.config.btnClass),a(),c(e.config.btnIcons==null||e.config.btnIcons.download==null?null:e.config.btnIcons.download.classes)}}function st(i,t){if(i&1){let e=g();s(0,"a",5),p("click",function(){m(e);let n=r(3);return C(n.fileViewer().download())}),s(1,"span"),v(2),f()()}if(i&2){let e=r(3);c(e.config.btnClass),a(),c(e.config.btnSubClass),a(),y(e.config.btnIcons==null||e.config.btnIcons.download==null?null:e.config.btnIcons.download.text)}}function ct(i,t){if(i&1&&(u(0,rt,2,4,"button",7),u(1,st,3,5,"a",2)),i&2){let e=r(2);d(!(e.config.btnIcons==null||e.config.btnIcons.download==null)&&e.config.btnIcons.download.classes?0:-1),a(),d(!(e.config.btnIcons==null||e.config.btnIcons.download==null)&&e.config.btnIcons.download.text?1:-1)}}function ut(i,t){if(i&1&&(s(0,"button",9),_(1,"span"),f()),i&2){let e=r().$implicit,o=r(2);c(o.config.btnClass),a(),c(e.icon.classes)}}function dt(i,t){if(i&1&&(s(0,"a")(1,"span"),v(2),f()()),i&2){let e=r().$implicit,o=r(2);c(o.config.btnClass),a(),c(o.config.btnSubClass),a(),y(e.icon.text)}}function ft(i,t){if(i&1&&(u(0,ut,2,4,"button",7),u(1,dt,3,5,"a",2)),i&2){let e=t.$implicit;d(e.icon.classes?0:-1),a(),d(e.icon.text?1:-1)}}function pt(i,t){if(i&1&&(s(0,"div",6),u(1,We,2,2),u(2,Ze,2,2),u(3,Ke,1,1),u(4,et,2,2),u(5,nt,2,2),u(6,at,2,2),u(7,ct,2,2),oe(8,ft,2,2,null,null,Ue),f()),i&2){let e=r();c(e.config.btnContainerClass),a(),d(e.config.btnShow!=null&&e.config.btnShow.rotateCounterClockwise?1:-1),a(),d(e.config.btnShow!=null&&e.config.btnShow.rotateClockwise?2:-1),a(),d(e.config.btnShow!=null&&e.config.btnShow.zoomOut?3:-1),a(),d(e.config.btnShow!=null&&e.config.btnShow.zoomIn?4:-1),a(),d(e.config.allowFullscreen?5:-1),a(),d(e.config.btnShow!=null&&e.config.btnShow.reset?6:-1),a(),d(e.config.btnShow!=null&&e.config.btnShow.download?7:-1),a(),le(e.config.customBtns)}}var Fe=(()=>{let t=class t{constructor(){this.fileViewer=w.required()}get config(){return this.fileViewer().config}};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=x({type:t,selectors:[["c3-file-viewer-actions"]],inputs:{fileViewer:[1,"fileViewer"]},standalone:!1,decls:5,vars:4,consts:[[1,"nav-button-container"],["type","button",3,"class","disabled"],[3,"class"],[1,"btn-container",3,"class"],["type","button",3,"click","disabled"],[3,"click"],[1,"btn-container"],["type","button",3,"class"],["type","button",3,"click"],["type","button"]],template:function(n,l){n&1&&(s(0,"div",0),u(1,Le,3,5),u(2,$e,2,5,"button",1),u(3,Pe,3,5,"a",2),f(),u(4,pt,10,9,"div",3)),n&2&&(a(),d(l.config.btnShow!=null&&l.config.btnShow.prev?1:-1),a(),d(l.config.btnShow!=null&&l.config.btnShow.next?2:-1),a(),d(!(l.config.btnIcons==null||l.config.btnIcons.next==null)&&l.config.btnIcons.next.text?3:-1),a(),d(l.fileViewer().currentFile.type.startsWith("image")?4:-1))},encapsulation:2});let i=t;return i})();var D=(()=>{let t=class t{constructor(o){this.sanitizer=o}transform(o){return o?this.sanitizer.bypassSecurityTrustResourceUrl(o):""}};t.\u0275fac=function(n){return new(n||t)(I(ge,16))},t.\u0275pipe=ne({name:"c3SafeUrl",type:t,pure:!0});let i=t;return i})();function Ct(i,t){if(i&1){let e=g();s(0,"img",1),F(1,"async"),F(2,"c3SafeUrl"),p("dragstart",function(n){m(e);let l=r();return C(l.dragstart.emit(n))}),f()}if(i&2){let e=r();b("src",S(2,4,S(1,2,e.fileViewer().currentFile.objectUrl)),E)("ngStyle",e.fileViewer().style)}}var Se=(()=>{let t=class t{constructor(){this.fileViewer=w.required(),this.dragstart=T()}};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=x({type:t,selectors:[["c3-file-viewer-image"],["","c3-file-viewer-image",""]],inputs:{fileViewer:[1,"fileViewer"]},outputs:{dragstart:"dragstart"},standalone:!1,decls:1,vars:1,consts:[["alt","Image not found...",3,"src","ngStyle"],["alt","Image not found...",3,"dragstart","src","ngStyle"]],template:function(n,l){n&1&&u(0,Ct,3,6,"img",0),n&2&&d(l.fileViewer().currentFile.objectUrl?0:-1)},dependencies:[fe,k,D],encapsulation:2});let i=t;return i})();var Me=(()=>{let t=class t{constructor(){this.fileViewer=w.required(),this.dragstart=T()}};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=x({type:t,selectors:[["c3-file-viewer-pdf"]],hostAttrs:[1,"c3-file-viewer-pdf",2,"display","block"],inputs:{fileViewer:[1,"fileViewer"]},outputs:{dragstart:"dragstart"},standalone:!1,decls:6,vars:9,consts:[["type","application/pdf",3,"src"],["mat-icon-button","",1,"download-button",3,"click"]],template:function(n,l){n&1&&(_(0,"embed",0),F(1,"async"),F(2,"c3SafeUrl"),s(3,"button",1),p("click",function(){return l.fileViewer().download()}),s(4,"mat-icon"),v(5,"download"),f()()),n&2&&(N("height","100%")("width","100%"),b("src",S(2,7,S(1,5,l.fileViewer().currentFile.objectUrl)),ee))},dependencies:[he,we,k,D],encapsulation:2});let i=t;return i})();var Te=(()=>{let t=class t{constructor(){this.fileViewer=w.required()}};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=x({type:t,selectors:[["c3-file-viewer-video"]],inputs:{fileViewer:[1,"fileViewer"]},standalone:!1,decls:3,vars:5,consts:[["controls","","crossorigin","*",3,"src"]],template:function(n,l){n&1&&(_(0,"video",0),F(1,"async"),F(2,"c3SafeUrl")),n&2&&b("src",S(2,3,S(1,1,l.fileViewer().currentFile.objectUrl)),E)},dependencies:[k,D],encapsulation:2});let i=t;return i})();var ke=(()=>{let t=class t{constructor(){this.fileViewer=w.required()}};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=x({type:t,selectors:[["c3-file-viewer-default"]],inputs:{fileViewer:[1,"fileViewer"]},standalone:!1,decls:3,vars:1,consts:[[3,"click"]],template:function(n,l){n&1&&(ae(0),s(1,"button",0),p("click",function(){return l.fileViewer().download()}),v(2),f(),re()),n&2&&(a(2),de("Download ",l.fileViewer().getOriginalName()))},styles:["[_nghost-%COMP%]{display:block}"]});let i=t;return i})();function ht(i,t){if(i&1){let e=g();s(0,"c3-file-viewer-image",5),p("dragstart",function(n){m(e);let l=r();return C(l.onDragStart(n))}),f()}if(i&2){let e=r();ue(e.style),b("fileViewer",e)}}function xt(i,t){if(i&1&&_(0,"c3-file-viewer-video",3),i&2){let e=r();b("fileViewer",e)}}function vt(i,t){if(i&1&&_(0,"c3-file-viewer-pdf",3),i&2){let e=r();b("fileViewer",e)}}function Vt(i,t){if(i&1&&_(0,"c3-file-viewer-default",3),i&2){let e=r();b("fileViewer",e)}}function It(i,t){i&1&&(s(0,"div",4),_(1,"div",6),f())}function yt(i,t){if(i&1){let e=g();s(0,"div",1),F(1,"async"),p("wheel",function(n){let l=m(e);return C(l.scrollZoom(n))})("dragover",function(n){let l=m(e);return C(l.onDragOver(n))}),u(2,ht,1,3,"c3-file-viewer-image",2)(3,xt,1,1,"c3-file-viewer-video",3)(4,vt,1,1,"c3-file-viewer-pdf",3)(5,Vt,1,1,"c3-file-viewer-default",3),_(6,"div"),u(7,It,2,0,"div",4),_(8,"c3-file-viewer-actions",3),f()}if(i&2){let e=t;N("height",e.styleHeight)("background-color",e.config.containerBackgroundColor),b("c3-full-screen",S(1,8,e.fullscreen$)),a(2),d(e.currentFile.type.startsWith("image")?2:e.currentFile.type.startsWith("video")?3:e.currentFile.type.startsWith("application/pdf")?4:5),a(5),d(e.loading?7:-1),a(),b("fileViewer",e)}}var Ae=(()=>{let t=class t{constructor(o,n){this.moduleConfig=o,this._http=n,this.screenHeightOccupied=w(0),this.fileViewer=w.required(),this.indexChange=T(),this.configChange=T(),this.customFileEvent=T(),O(()=>{let l=this.fileViewer();l.customFile$.subscribe(h=>{this.customFileEvent.emit(h)}),l.index$.subscribe(h=>{this.indexChange.emit(h)}),l.config$.subscribe(h=>{this.configChange.emit(h)})})}ngOnInit(){this.defineStyleHeight()}onMouseOver(){let o=this.fileViewer();o&&(o.hovered=!0)}onMouseLeave(){let o=this.fileViewer();o&&(o.hovered=!1)}ngOnChanges(o){o.screenHeightOccupied&&this.fileViewer()&&this.defineStyleHeight()}next(o){this.fileViewer().nextImage(o)}previous(o){this.fileViewer().previousImage(o)}defineStyleHeight(){this.fileViewer().styleHeight="calc(100% - "+this.screenHeightOccupied()+"px)"}};t.\u0275fac=function(n){return new(n||t)(I("config",8),I(me))},t.\u0275cmp=x({type:t,selectors:[["c3-file-viewer"]],hostAttrs:[1,"c3-file-viewer"],hostBindings:function(n,l){n&1&&p("mouseover",function(){return l.onMouseOver()})("mouseleave",function(){return l.onMouseLeave()})("keyup.ArrowRight",function(z){return l.next(z)},$)("keyup.ArrowLeft",function(z){return l.previous(z)},$)},inputs:{screenHeightOccupied:[1,"screenHeightOccupied"],fileViewer:[1,"fileViewer"]},outputs:{indexChange:"indexChange",configChange:"configChange",customFileEvent:"customFileEvent"},standalone:!1,features:[J],decls:1,vars:1,consts:[[1,"c3-file-container",3,"c3-full-screen","height","backgroundColor"],[1,"c3-file-container",3,"wheel","dragover","c3-full-screen"],[3,"fileViewer","style"],[3,"fileViewer"],[1,"spinner-container"],[3,"dragstart","fileViewer"],[1,"spinner"]],template:function(n,l){if(n&1&&u(0,yt,9,10,"div",0),n&2){let h;d((h=l.fileViewer())?0:-1,h)}},dependencies:[ye,Fe,Se,Me,Te,ke,k],styles:[`.c3-file-container{position:relative;width:100%;display:flex;justify-content:center;align-items:center;overflow:hidden}
`],encapsulation:2});let i=t;return i})();var De=(()=>{let t=class t{constructor(o){this.fileViewer=o}};t.\u0275fac=function(n){return new(n||t)(I(ve))},t.\u0275cmp=x({type:t,selectors:[["ng-component"]],standalone:!1,decls:1,vars:2,consts:[[3,"fileViewer","screenHeightOccupied"]],template:function(n,l){n&1&&_(0,"c3-file-viewer",0),n&2&&b("fileViewer",l.fileViewer)("screenHeightOccupied",0)},dependencies:[Ae],encapsulation:2});let i=t;return i})();var St=["*"],ri=(()=>{let t=class t{constructor(o){this._dialog=o,this.fileViewer=w.required(),this.dialogConfig=w({panelClass:"c3-file-viewer-dialog",width:"80%",height:"80%"})}openDialog(){this._dialog.open(De,V({data:this.fileViewer()},this.dialogConfig()))}};t.\u0275fac=function(n){return new(n||t)(I(Ve))},t.\u0275cmp=x({type:t,selectors:[["c3-file-viewer-dialog"]],hostAttrs:[1,"c3-file-viewer-dialog"],hostBindings:function(n,l){n&1&&p("click",function(){return l.openDialog()})},inputs:{fileViewer:[1,"fileViewer"],dialogConfig:[1,"dialogConfig"]},standalone:!1,ngContentSelectors:St,decls:1,vars:0,template:function(n,l){n&1&&(se(),ce(0))},encapsulation:2});let i=t;return i})();var j={btnContainerClass:"btn-container",btnClass:"default",btnSubClass:"material-icons",zoomFactor:.1,containerBackgroundColor:"#00000000",wheelZoom:!1,allowFullscreen:!0,allowKeyboardNavigation:!0,btnShow:{zoomIn:!0,zoomOut:!0,rotateClockwise:!0,rotateCounterClockwise:!0,next:!0,prev:!0,reset:!0,download:!0},btnIcons:{zoomIn:{text:"zoom_in"},zoomOut:{text:"zoom_out"},rotateClockwise:{text:"rotate_right"},rotateCounterClockwise:{text:"rotate_left"},fullscreen:{text:"fullscreen"},reset:{text:"restore"},download:{text:"download"}}};var U=class{constructor(t,e){this.name=t,this.fileUrl=e}};var Mt=["application/pdf","image/jpeg","image/png","image/gif","image/svg+xml","image/webp","image/avif","image/bmp","image/x-icon","video/mp4","video/webm","video/ogg"];function ze(i){return Mt.includes(i)}var Oe=class{get config(){return this._config}set config(t){this._config=this.mergeConfig(j,t),this.config$.next(this._config)}get currentFile(){return this.filesObjectUrl[this.currentIndex]}set files(t){this._files=t,this.currentIndex=0,this.index$.next(this.currentIndex);for(let e of t)if(this.filesObjectUrl.push(H(V({},e),{objectUrl:e.objectUrl||this.createObjectURL(e)})),e.alternativeVersions)for(let o of e.alternativeVersions)this.filesObjectUrl.push(H(V(V({},e),o),{objectUrl:this.createObjectURL(o)}))}get files(){return this._files}constructor({config:t,files:e,client:o}){this._config=j,this.config$=new A(j),this.fullscreen$=new A(!1),this.customFile$=new A(null),this.index$=new A(0),this.loading=!0,this.currentIndex=0,this.style={transform:"",msTransform:"",oTransform:"",webkitTransform:"",minHeight:"auto",maxHeight:"auto",height:"auto",minWidth:"auto",maxWidth:"auto",width:"auto"},this.styleHeight="100%",this.hovered=!1,this._files=[],this.filesObjectUrl=[],this.locationBlobMap=new Map,this.scale=1,this.rotation=0,this.translateX=0,this.translateY=0,this.prevX=0,this.prevY=0,t&&(this.config=t),o&&(this.client=o.get.bind(o)),e&&(this.files=e),this.config$.subscribe(n=>{let{minHeight:l,maxHeight:h,minWidth:z,maxWidth:Ee,height:q,width:Ne}=n;this.style.minHeight=this.valueToCss(l),this.style.height=this.valueToCss(q),this.style.width=this.valueToCss(Ne),this.style.maxHeight=this.valueToCss(h),this.style.minWidth=this.valueToCss(z),this.style.maxWidth=this.valueToCss(Ee),this.styleHeight=this.valueToCss(q),this.updateStyle()})}createObjectURL(t){this.onLoadStart();let e=Tt(t)?t.type:t.contentType;if(!ze(e)){this.onLoaded();return}return B(t.location).pipe(Y(o=>this.locationBlobMap.has(o)?B(this.locationBlobMap.get(o)):this.getFile(o).pipe(W(n=>URL.createObjectURL(n)),L(n=>this.locationBlobMap.set(o,n)))),L(()=>this.onLoaded()))}getFile(t){let e=this.config.customClient||this.client;if(!e)throw new Error("No http client provided. Please provide a custom client or import HttpClientModule");return e(t,{responseType:"blob"})}previousImage(t){this.canNavigate(t)&&(this.loading=!0,this.currentIndex>0?this.currentIndex--:this.currentIndex=this.files.length-1,this.index$.next(this.currentIndex),this.reset())}nextImage(t){this.canNavigate(t)&&(this.loading=!0,this.currentIndex<this.files.length-1?this.currentIndex++:this.currentIndex=0,this.index$.next(this.currentIndex),this.reset())}zoomIn(){this.scale*=1+(this.config.zoomFactor||0),this.updateStyle()}zoomOut(){this.scale>(this.config.zoomFactor||0)&&(this.scale/=1+(this.config.zoomFactor||0)),this.updateStyle()}scrollZoom(t){return this.config.wheelZoom?(t.deltaY>0?this.zoomOut():this.zoomIn(),!1):!0}rotateClockwise(){this.rotation+=90,this.updateStyle()}rotateCounterClockwise(){this.rotation-=90,this.updateStyle()}onLoaded(){this.loading=!1}onLoadStart(){this.loading=!0}imageNotFound(t){this.loading=!1,this.customFile$.next(new U("imageNotFound",t.location))}onDragOver(t){this.translateX+=t.clientX-this.prevX,this.translateY+=t.clientY-this.prevY,this.prevX=t.clientX,this.prevY=t.clientY,this.updateStyle()}onDragStart(t){if(t.target&&t.dataTransfer&&t.dataTransfer.setDragImage){let o=t.target.nextElementSibling;o&&t.dataTransfer.setDragImage(o,0,0)}this.prevX=t.clientX,this.prevY=t.clientY}toggleFullscreen(){let t=this.fullscreen$.getValue();this.fullscreen$.next(!t),t&&this.reset()}reset(){this.scale=1,this.rotation=0,this.translateX=0,this.translateY=0,this.updateStyle()}getOriginalName(t=this.currentFile){return t.metadata?.originalName||t.name}canNavigate(t){return t==null||this.config.allowKeyboardNavigation&&this.hovered}updateStyle(){this.style.transform=`translate(${this.translateX}px, ${this.translateY}px) rotate(${this.rotation}deg) scale(${this.scale})`,this.style.msTransform=this.style.transform,this.style.webkitTransform=this.style.transform,this.style.oTransform=this.style.transform}valueToCss(t){return t?typeof t=="string"?t:t+"px":"auto"}mergeConfig(t,e){let o=V({},t);return e&&(o=V(V({},t),e),e.btnIcons&&(o.btnIcons=V(V({},t.btnIcons),e.btnIcons))),o}download(t=this.currentFile){let e=this.config.customClient||this.client,o=this.getOriginalName(t);if(t.objectUrl&&this.locationBlobMap.has(t.location)){let n=this.locationBlobMap.get(t.location);this.downloadFromUrl(n,o)}else e?this.downloadWithClient(t,e,o):console.error("No http client available for download")}downloadFromUrl(t,e){let o=document.createElement("a");o.href=t,o.download=e,document.body.appendChild(o),o.click(),document.body.removeChild(o)}downloadWithClient(t,e,o){e(t.location,{responseType:"blob"}).subscribe({next:n=>{let l=URL.createObjectURL(n);this.downloadFromUrl(l,o),setTimeout(()=>{URL.revokeObjectURL(l)},1e3)},error:n=>{console.error("Download failed:",n);let l=document.createElement("a");l.href=t.location,l.download=o,l.target="_blank",l.click()}})}};function Tt(i){return"type"in i}var Ii=(()=>{let t=class t{};t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=te({type:t}),t.\u0275inj=K({providers:[Ce(_e())],imports:[pe,Ie,xe,be]});let i=t;return i})();var Fi=[{name:"123645-Crabby - 1",metadata:{originalName:"Crabby - 1"},type:"image/png",location:"img/crabby-1.png",lastModified:new Date},{name:"123645-Crabby - 2",metadata:{originalName:"Crabby - 2"},type:"image/jpeg",location:"img/crabby-2.jpeg",lastModified:new Date},{name:"123645-Crabby - 3",metadata:{originalName:"Crabby - 3"},type:"image/png",location:"img/crabby-3.png",lastModified:new Date},{name:"123645-Crabby - 4",metadata:{originalName:"Crabby - 4"},type:"image/png",location:"img/crabby-4.png",lastModified:new Date},{name:"123645-Crabby - 5",metadata:{originalName:"Crabby - 5"},type:"image/png",location:"img/crabby-5.png"},{name:"123645-Crabby - 6",metadata:{originalName:"Crabby - 6"},type:"image/png",location:"img/crabby-6.png"},{name:"123645-PDF",metadata:{originalName:"PDF.pdf"},type:"application/pdf",location:"img/r.pdf"},{location:"zip/test.zip",type:"application/zip",name:"chelou-test.zip",metadata:{originalName:"test.zip"}},{location:"video/Crabe_ZZ_Top.mp4",type:"video/mp4",name:"Crabe_ZZ_Top.mp4",metadata:{originalName:"Crabe_ZZ_Top.mp4"}},{location:"https://upload.wikimedia.org/wikipedia/commons/7/79/Terminator_in_Madame_Tussaud_London_%2833465711484%29.jpg",type:"image/jpeg",name:"Terminator_in_Madame_Tussaud_London.jpg",metadata:{originalName:"Terminator_in_Madame_Tussaud_London.jpg"}}],Si={btnContainerClass:"other",btnClass:"btn btn-hover-primary px-1",btnSubClass:"material-icons font-size-xl",zoomFactor:.1,wheelZoom:!0,allowFullscreen:!0,allowKeyboardNavigation:!0,height:"640px",btnShow:{zoomIn:!0,zoomOut:!0,rotateClockwise:!0,rotateCounterClockwise:!0,next:!1,prev:!1,reset:!0,download:!0},btnIcons:{next:{text:"navigate_next"},prev:{text:"navigate_before"}},customBtns:[]};export{Ae as a,ri as b,Oe as c,Ii as d,Fi as e,Si as f};
